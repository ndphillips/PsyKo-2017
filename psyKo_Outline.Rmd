---
title: "PsyKo Workshop"
author: "Nathaniel Phillips"
date: "17 March 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Outline

1. Getting Started
    - Installing R and RStudio
    - Understanding the Console, and the Source (editor)
    - Opening a new .R script
    - Coding basics
2. R Basics
    - Defining and using vectors
        - `a <- x
    - Calculating descriptive statistics
        - `mean()`, `sd()`
    - Dataframes
        - `names()`
        - `aggregate()`
    - Loading externaldata as dataframes
3. Plotting
    - colors
    - Scatterplot
    - Histogram
    - Pirateplot
4. Hypothesis tests
    - t-tests with `t.test()`
    - correlation test with `cor.test()`
5. ANOVA
    - Post-hoc tests
6. Bayesian Statistics
    - Bayesian ttest
    - Bayesian anova
5. Simulations
    - What is a p-value anyway?
    - What happens to significance when variables are correlated?
6. Writing APA papers with papaja


# Getting Started

## Installing Base R and RStudio

To install the latest version of Base-R, click on one of the following links and follow the instructions.

| Operating System| Link|
|:------|:----|
|     Windows|    [http://cran.r-project.org/bin/windows/base/](http://cran.r-project.org/bin/windows/base/)|
|     Mac|    [http://cran.r-project.org/bin/macosx/](http://cran.r-project.org/bin/macosx/)|

To install the latest version of RStudio, click on the following link and follow the instructions.

| Operating System| Link|
|:------|:----|
|     All|    [http://www.rstudio.com/products/rstudio/download/](http://www.rstudio.com/products/rstudio/download/)|


When you open RStudio, you'll see the following four windows (also called panes) shown in in Figure \@ref(fig:rstudiowindows). However, your windows might be in a different order that those in Figure \@ref(fig:rstudiowindows). If you'd like, you can change the order of the windows under RStudio preferences. You can also change their shape by either clicking the minimize or maximize buttons on the top right of each panel, or by clicking and dragging the middle of the borders of the windows.

```{r rstudiowindows, fig.cap= "The four panes of RStudio.", fig.margin = TRUE, echo = FALSE, out.width = "100%", fig.align="center"}
knitr::include_graphics(c("images/RStudio_Screenshot_Labels.png"))
```



### Console: R's Heart

```{r consolewindow, fig.cap= "The console the calculation heart of R. All of your code will (eventually) go through here.", fig.margin = TRUE, echo = FALSE, out.width = "75%"}
knitr::include_graphics(c("images/consoless.png"))
```


The console is the heart of R. Here is where R actually evaluates code. At the beginning of the console you'll see the character \texttt{>}. This is a prompt that tells you that R is ready for new code. You can type code directly into the console after the \texttt{>} prompt and get an immediate response. For example, if you type 1+1 into the console and press enter, you'll see that R immediately gives an output of 2.

```{r}
1+1
```



### Source - Your notepad for code

```{r sourcewindow, fig.cap= "The Source contains all of your individual R scripts. The code won't be evaluated until you send it to the Console.", fig.margin = TRUE, echo = FALSE, out.width = "100%", fig.align='center'}
knitr::include_graphics(c("images/piratesanalysisss.png"))
```

The source pane is where you create and edit ``R Scripts" - your collections of code. Don't worry, R scripts are just text files with the ".R" extension. When you open RStudio, it will automatically start a new Untitled script. Before you start typing in an untitled R script, you should always save the file under a new file name (like, "2015PirateSurvey.R"). That way, if something on your computer crashes while you're working, R will have your code waiting for you when you re-open RStudio.

You'll notice that when you're typing code in a script in the Source panel, R won't actually evaluate the code as you type. To have R actually evaluate your code, you need to first 'send' the code to the Console (we'll talk about this in the next section).

There are many ways to send your code from the Source to the console. The slowest way is to copy and paste. A faster way is to highlight the code you wish to evaluate and clicking on the "Run" button on the top right of the Source. Alternatively, you can use the hot-key "Command + Return" on Mac, or "Control + Enter" on PC to send all highlighted code to the console.


## Packages

When you download and install R for the first time, you are installing the Base R software. Base R will will contain most of the functions you'll use on a daily basis like `mean()` and `hist()`. However, only functions written by the original authors of the R language will appear here. If you want to access data and code written by other people, you'll need to install it as a *package*. An R package is simply a bunch of data, from functions, to help menus, to vignettes (examples), stored in one neat package.


```{r package, fig.cap= "An R package is light a lightbulb. First you need to order it with install.packages(). Then, every time you want to use it, you need to turn it on with library()", fig.margin = TRUE, fig.align = 'center', echo = FALSE, out.width = "50%"}
knitr::include_graphics(c("images/packagebulb.png"))
```


A package is like a light bulb. In order to use it, you first need to order it to your house (i.e.; your computer) by *installing* it. Once you've installed a package, you never need to install it again. However, every time you want to actually use the package, you need to turn it on  by *loading* it. Here's how to do it.


#### Installing a new package

Installing a package simply means downloading the package code onto your personal computer. There are two main ways to install new packages. The first, and most common, method is to download them from the Comprehensive R Archive Network (CRAN). CRAN is the central repository for R packages. To install a new R package from CRAN, you can simply run the code `install.packages("name")`, where "name" is the name of the package. For example, to download the `yarrr` package, which contains several data sets and functions we will use in this book, you should run the following:



```{r eval = FALSE}
# Install the yarrr package from CRAN
#   You only need to install a package once!
install.packages("yarrr")
```


When you run `install.packages("name")` R will download the package from CRAN. If everything works, you should see some information about where the package is being downloaded from, in addition to a progress bar.

```{r installingpackages, fig.cap= "When you install a new package, you'll see some random text like this you the download progress. You don't need to memorize this.", fig.margin = TRUE, fig.align = 'center', echo = FALSE, out.width = "100%"}
knitr::include_graphics(c("images/installingpackages.png"))
```


Like ordering a light bulb, once you've installed a package on your computer you never need to install it again (unless you want to try to install a new version of the package). However, every time you want to use it, you need to turn it on by loading it.


#### Loading a package

Once you've installed a package, it's on your computer. However, just because it's on your computer doesn't mean R is ready to use it. If you want to use something, like a function or dataset, from a package you *always* need to *load* the package in your R session first. Just like a light bulb, you need to turn it on to use it!

To load a package, you use the `library()` function. For example, now that we've installed the `yarrr` package, we can load it with `library("yarrr")`:

```{r, message = FALSE}
# Load the yarrr package so I can use it!
#   You have to load a package in every new R session!
library("yarrr")
```

## Coding basics


### Comments with \#

Lines that begin with \# are comments. If you evaluate any code that starts with \#, R will just ignore that line. In this book, comments will be either be literal comments that I write directly to explain code, or they will be *output* generated automatically from R. For example, in the code chunk below, you see lines starting with \#\#. These are the output from the previous line(s) of code. When you run the code yourself, you should see the same output in your *console*.

```{r, eval = FALSE}
# This is a comment I wrote

1 + 2
```

## R Basics

### Defining and using vectors

You define objects in R using the ` <- ` notation. Let's define some objects

```{r}
a <- 2      # The object a now has a value of 2
b <- "male"   # The object b has a value of "male"

# Print the results!
a
b
```

You can define vectors of object using the `c()` function. For example, imagine that I want to record the following data from a survey:

```{r survey, echo = FALSE}
survey.df <- data.frame(
  participant = c(1, 2, 3, 4, 5, 6),
  age = c(22, 24, 25, 21, 22, 24),
sex = c("m", "m", "m", "f", "f", "m"),
condition = c("c", "n", "n", "c", "n", "c"),
score = c(5, 3, 4, 4, 3, 2))
knitr::kable(survey.df, fig.cap = "The results of a survey of 6 participants")
```


```{r}
# Create vectors representing the results of a survey: 
participant <- c(1, 2, 3, 4, 5, 6)
age <- c(22, 24, 25, 21, 22, 24)
sex <- c("m", "m", "m", "f", "f", "m")
condition <- c("c", "n", "n", "c", "n", "c")
score <- c(5, 3, 4, 4, 3, 2)
```

### Descriptive statistics

| Function| Example|Result |
|:-------------------|:----------------------|:-----------------------|
|     `min(x), max(x)`|    `min(age)`|`r min(age)`    |
|     `mean(x), median(x)`|    `mean(age)`     | `r mean(age)` |
|     `sd(x), var(x), range(x)`|    `sd(score)` | `r sd(score)` |

Table: (\#tab:continuousvectorfunctiontable) Summary statistic functions for continuous data.

To calculate descriptive statistics on a vector, use a function like `mean()`, or `sd()`:

```{r}
# What was the mean age of the participants?
mean(age)

# What was the maximum age?
max(age)

# YOUR TURN!

# What was the maximum score of the participants?

# What was the median score?

# What was the standard deviation of the scores?
```

### Dataframes


